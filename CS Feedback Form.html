<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Experience Feedback / تقييم تجربة المريض</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Gold Color for Richer Aesthetic */
        .bg-gold { background-color: #FFD700; }
        .text-gold { color: #FFD700; }
        .border-gold { border-color: #FFD700; }
        /* Font setup */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7; /* Off-white background */
        }
        /* Style the hidden radio inputs and show stars */
        .rating-group input[type="radio"] {
            display: none;
        }
        .rating-group label {
            cursor: pointer;
            font-size: 1.5rem; /* Larger for mobile touch targets */
            color: #E5E7EB; /* Light gray for unselected stars */
            transition: color 0.2s;
            padding: 0 0.25rem;
        }
        .rating-group label:hover,
        .rating-group label:hover ~ label {
            color: #FFD700; /* Gold on hover */
        }
        /* Style checked state */
        .rating-group input[type="radio"]:checked ~ label,
        .rating-group input[type="radio"]:checked ~ label:hover,
        .rating-group input[type="radio"]:checked ~ label:hover ~ label {
            color: #FFD700; /* Gold for selected stars */
        }
        /* Hidden classes for language toggle */
        .lang-ar { display: none; }
    </style>
</head>
<body>

    <div id="main-container" class="min-h-screen flex items-center justify-center p-4 sm:p-6" dir="ltr">
        <div class="w-full max-w-lg bg-white shadow-2xl rounded-xl p-6 sm:p-8 border border-gold">

            <!-- Header Section with Logo and Language Toggle -->
            <div class="mb-6 flex justify-between items-start border-b border-gray-100 pb-4">
                
                <!-- Logo (Increased Size to h-28 and side-aligned) -->
                <!-- IMPORTANT: Replace the URL below with your actual logo image URL -->
                <img src="https://i.imgur.com/TCvWrSn.png"
                     alt="Clinic Logo" class="h-28 w-auto rounded-md"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="hidden text-3xl font-bold text-gold">CLINIC NAME</div>
                
                <!-- Language Toggle -->
                <button onclick="toggleLanguage()" id="lang-toggle"
                        class="px-3 py-1 mt-1 text-sm font-semibold rounded-full border border-gray-300 text-gray-600 bg-gray-50 hover:bg-gray-200 transition">
                    العربية / English
                </button>
            </div>

            <!-- Title and Subtitle -->
            <div class="text-center mb-6 sm:mb-8 pt-2">
                <h1 class="text-3xl font-extrabold text-gray-800">
                    <span class="lang-en">Your Experience Matters</span>
                    <span class="lang-ar">تجربتك تهمنا</span>
                </h1>
                <p class="text-gray-500 mt-1">
                    <span class="lang-en">Please rate your experience using the 5 stars below (5 is the best).</span>
                    <span class="lang-ar">يرجى تقييم تجربتك باستخدام النجوم الخمسة أدناه (5 هو الأفضل).</span>
                </p>
            </div>

            <form id="feedbackForm" onsubmit="handleFormSubmit(event)">

                <!-- Hidden Input for Tracking ID -->
                <input type="hidden" id="submissionId" name="submissionId">

                <!-- Question 1: Overall Satisfaction (Visit) -->
                <div class="mb-6 p-4 border border-gray-100 rounded-lg shadow-sm">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">
                        <span class="lang-en">1. Overall, how satisfied were you with your visit?</span>
                        <span class="lang-ar">1. بشكل عام، ما مدى رضاك عن زيارتك؟</span>
                    </label>
                    <div class="rating-group flex justify-center text-3xl" data-question="Overall_Visit" dir="ltr">
                        <input type="radio" id="q1_r5" name="q1" value="5" required><label for="q1_r5" title="5 Stars">&#9733;</label>
                        <input type="radio" id="q1_r4" name="q1" value="4"><label for="q1_r4" title="4 Stars">&#9733;</label>
                        <input type="radio" id="q1_r3" name="q1" value="3"><label for="q1_r3" title="3 Stars">&#9733;</label>
                        <input type="radio" id="q1_r2" name="q1" value="2"><label for="q1_r2" title="2 Stars">&#9733;</label>
                        <input type="radio" id="q1_r1" name="q1" value="1"><label for="q1_r1" title="1 Star">&#9733;</label>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 mt-2">
                        <span class="lang-en">1 (Very Dissatisfied)</span>
                        <span class="lang-ar">1 (غير راضٍ جداً)</span>
                        <span class="lang-en">5 (Very Satisfied)</span>
                        <span class="lang-ar">5 (راضٍ جداً)</span>
                    </div>
                </div>

                <!-- Question 2: Staff Professionalism -->
                <div class="mb-6 p-4 border border-gray-100 rounded-lg shadow-sm">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">
                        <span class="lang-en">2. How would you rate the professionalism of our staff?</span>
                        <span class="lang-ar">2. كيف تقيم احترافية موظفينا؟</span>
                    </label>
                    <div class="rating-group flex justify-center text-3xl" data-question="Staff_Professionalism" dir="ltr">
                        <input type="radio" id="q2_r5" name="q2" value="5" required><label for="q2_r5" title="5 Stars">&#9733;</label>
                        <input type="radio" id="q2_r4" name="q2" value="4"><label for="q2_r4" title="4 Stars">&#9733;</label>
                        <input type="radio" id="q2_r3" name="q2" value="3"><label for="q2_r3" title="3 Stars">&#9733;</label>
                        <input type="radio" id="q2_r2" name="q2" value="2"><label for="q2_r2" title="2 Stars">&#9733;</label>
                        <input type="radio" id="q2_r1" name="q2" value="1"><label for="q2_r1" title="1 Star">&#9733;</label>
                    </div>
                </div>

                <!-- Question 3: Facility Cleanliness & Comfort -->
                <div class="mb-6 p-4 border border-gray-100 rounded-lg shadow-sm">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">
                        <span class="lang-en">3. How would you rate the facility's cleanliness and comfort?</span>
                        <span class="lang-ar">3. كيف تقيم نظافة وراحة منشأتنا؟</span>
                    </label>
                    <div class="rating-group flex justify-center text-3xl" data-question="Facility_Comfort" dir="ltr">
                        <input type="radio" id="q3_r5" name="q3" value="5" required><label for="q3_r5" title="5 Stars">&#9733;</label>
                        <input type="radio" id="q3_r4" name="q3" value="4"><label for="q3_r4" title="4 Stars">&#9733;</label>
                        <input type="radio" id="q3_r3" name="q3" value="3"><label for="q3_r3" title="3 Stars">&#9733;</label>
                        <input type="radio" id="q3_r2" name="q3" value="2"><label for="q3_r2" title="2 Stars">&#9733;</label>
                        <input type="radio" id="q3_r1" name="q3" value="1"><label for="q3_r1" title="1 Star">&#9733;</label>
                    </div>
                </div>

                <!-- Question 4: Clarity of Instructions/Explanation -->
                <div class="mb-6 p-4 border border-gray-100 rounded-lg shadow-sm">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">
                        <span class="lang-en">4. Was the explanation of your treatment clear and easy to understand?</span>
                        <span class="lang-ar">4. هل كان شرح علاجك واضحًا وسهل الفهم؟</span>
                    </label>
                    <div class="rating-group flex justify-center text-3xl" data-question="Clarity_of_Treatment" dir="ltr">
                        <input type="radio" id="q4_r5" name="q4" value="5" required><label for="q4_r5" title="5 Stars">&#9733;</label>
                        <input type="radio" id="q4_r4" name="q4" value="4"><label for="q4_r4" title="4 Stars">&#9733;</label>
                        <input type="radio" id="q4_r3" name="q4" value="3"><label for="q4_r3" title="3 Stars">&#9733;</label>
                        <input type="radio" id="q4_r2" name="q4" value="2"><label for="q4_r2" title="2 Stars">&#9733;</label>
                        <input type="radio" id="q4_r1" name="q4" value="1"><label for="q4_r1" title="1 Star">&#9733;</label>
                    </div>
                </div>

                <!-- Question 5: Treatment Satisfaction -->
                <div class="mb-6 p-4 border border-gray-100 rounded-lg shadow-sm">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">
                        <span class="lang-en">5. How satisfied are you with the overall treatment you received?</span>
                        <span class="lang-ar">5. ما مدى رضاك عن العلاج الذي تلقيته بشكل عام؟</span>
                    </label>
                    <div class="rating-group flex justify-center text-3xl" data-question="Treatment_Satisfaction" dir="ltr">
                        <input type="radio" id="q6_r5" name="q6" value="5" required><label for="q6_r5" title="5 Stars">&#9733;</label>
                        <input type="radio" id="q6_r4" name="q6" value="4"><label for="q6_r4" title="4 Stars">&#9733;</label>
                        <input type="radio" id="q6_r3" name="q6" value="3"><label for="q6_r3" title="3 Stars">&#9733;</label>
                        <input type="radio" id="q6_r2" name="q6" value="2"><label for="q6_r2" title="2 Stars">&#9733;</label>
                        <input type="radio" id="q6_r1" name="q6" value="1"><label for="q6_r1" title="1 Star">&#9733;</label>
                    </div>
                </div>

                <!-- Question 6: Likelihood to Recommend -->
                <div class="mb-8 p-4 border border-gray-100 rounded-lg shadow-sm">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">
                        <span class="lang-en">6. How likely are you to recommend us to others?</span>
                        <span class="lang-ar">6. ما مدى احتمالية أن توصي بنا للآخرين؟</span>
                    </label>
                    <div class="rating-group flex justify-center text-3xl" data-question="Likelihood_to_Recommend" dir="ltr">
                        <input type="radio" id="q5_r5" name="q5" value="5" required><label for="q5_r5" title="5 Stars">&#9733;</label>
                        <input type="radio" id="q5_r4" name="q5" value="4"><label for="q5_r4" title="4 Stars">&#9733;</label>
                        <input type="radio" id="q5_r3" name="q5" value="3"><label for="q5_r3" title="3 Stars">&#9733;</label>
                        <input type="radio" id="q5_r2" name="q5" value="2"><label for="q5_r2" title="2 Stars">&#9733;</label>
                        <input type="radio" id="q5_r1" name="q5" value="1"><label for="q5_r1" title="1 Star">&#9733;</label>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 mt-2">
                        <span class="lang-en">1 (Not Likely)</span>
                        <span class="lang-ar">1 (غير محتمل)</span>
                        <span class="lang-en">5 (Very Likely)</span>
                        <span class="lang-ar">5 (محتمل جداً)</span>
                    </div>
                </div>


                <button type="submit"
                        class="w-full py-3 rounded-xl text-lg font-bold text-white bg-gold hover:bg-yellow-600 transition duration-300 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-yellow-300">
                    <span class="lang-en">Submit Feedback via WhatsApp (Primary Action)</span>
                    <span class="lang-ar">أرسل ملاحظاتك عبر واتساب (الإجراء الأساسي)</span>
                </button>

                <p id="error-message" class="mt-4 text-center text-red-600 font-medium hidden">
                    <span class="lang-en">Please answer all 6 questions before submitting.</span>
                    <span class="lang-ar">يرجى الإجابة على جميع الأسئلة الستة قبل الإرسال.</span>
                </p>
            </form>
            
            <!-- Google Review Link Section -->
            <div class="mt-6 border-t pt-6 border-gray-100">
                <p class="text-center text-gray-600 mb-3 font-semibold">
                    <span class="lang-en">Ready to share your positive experience publicly?</span>
                    <span class="lang-ar">هل أنت مستعد لمشاركة تجربتك الإيجابية علناً؟</span>
                </p>
                <!-- NOTE: Replace the href value below with your actual Google Reviews link -->
                <a id="google-review-link" href="https://g.page/r/CRdG0zG776nEEAI/review" 
                   target="_blank"
                   class="block w-full text-center py-3 rounded-xl text-lg font-bold border-2 border-gold text-gold hover:bg-gold hover:text-white transition duration-300 shadow-md">
                    <span class="lang-en">Leave Us a Google Review</span>
                    <span class="lang-ar">اترك لنا تقيمك على جوجل</span>
                </a>
            </div>

        </div>
    </div>

    <script>
        // --- Language Toggle Logic ---
        let currentLang = 'en';
        const mainContainer = document.getElementById('main-container');
        const langToggle = document.getElementById('lang-toggle');

        function updateContentVisibility() {
            // Hide all language-specific spans
            document.querySelectorAll('.lang-en, .lang-ar').forEach(el => {
                el.style.display = 'none';
            });

            // Show elements for the current language
            document.querySelectorAll(`.lang-${currentLang}`).forEach(el => {
                el.style.display = 'inline';
            });
            
            // Handle block elements like the container itself
            document.querySelectorAll(`.lang-${currentLang}`).forEach(el => {
                if (el.parentNode.tagName === 'BUTTON' || el.parentNode.tagName === 'A' || el.parentNode.tagName === 'P') {
                    el.style.display = 'inline-block';
                }
            });

            // Set global direction for RTL support
            mainContainer.setAttribute('dir', currentLang === 'ar' ? 'rtl' : 'ltr');
        }

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'ar' : 'en';
            updateContentVisibility();
        }

        // Initialize content to English on load
        document.addEventListener('DOMContentLoaded', updateContentVisibility);


        // --- Form Submission Logic ---
        // Set up a unique ID for this submission (helps with tracking)
        document.getElementById('submissionId').value = crypto.randomUUID();

        function handleFormSubmit(event) {
            event.preventDefault(); // Stop the default form submission

            const form = event.target;
            const formData = new FormData(form);

            // 1. Validation: Check if all 6 questions are answered
            const requiredFields = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6'];
            let allAnswered = true;
            for (const field of requiredFields) {
                if (!formData.get(field)) {
                    allAnswered = false;
                    break;
                }
            }

            const errorMessage = document.getElementById('error-message');
            if (!allAnswered) {
                errorMessage.classList.remove('hidden');
                // Scroll to the top to show the error
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            }
            errorMessage.classList.add('hidden');

            // 2. Collect all ratings and the unique ID
            const id = formData.get('submissionId');
            const q1 = formData.get('q1'); // Overall Visit
            const q2 = formData.get('q2'); // Staff Professionalism
            const q3 = formData.get('q3'); // Facility Comfort
            const q4 = formData.get('q4'); // Treatment Clarity
            const q6 = formData.get('q6'); // Treatment Satisfaction (Q5 in form logic)
            const q5 = formData.get('q5'); // Likelihood to Recommend (Q6 in form logic)


            // 3. Format the message clearly for internal use (Using English Q-titles for consistency)
            const message =
                `*NEW PATIENT FEEDBACK*\n` +
                `Submission ID: ${id}\n\n` +
                `*RATING SCORES (1-5)*:\n` +
                `1. Overall Visit: ${q1}\n` +
                `2. Staff Professionalism: ${q2}\n` +
                `3. Facility Comfort: ${q3}\n` +
                `4. Treatment Clarity: ${q4}\n` +
                `5. Treatment Satisfaction: ${q6}\n` + 
                `6. Likelihood to Recommend: ${q5}`; 

            // 4. Construct the WhatsApp URL
            const whatsappNumber = "971543482080";
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;

            // 5. Redirect the user to WhatsApp
            window.location.href = whatsappUrl;

            // Optional: Provide a visual confirmation message after redirect is initiated
            const alertMessageEn = 'Opening WhatsApp now! Please click "Send" to finalize your feedback.';
            const alertMessageAr = 'نفتح تطبيق واتساب الآن! يرجى النقر على "إرسال" لإنهاء ملاحظاتك.';
            alert(currentLang === 'ar' ? alertMessageAr : alertMessageEn);
        }

        // Helper function for the alert replacement
        function alert(message) {
            const titleEn = "Submission Initiated!";
            const titleAr = "تم بدء عملية الإرسال!";
            const buttonEn = "OK";
            const buttonAr = "حسناً";
            
            const container = document.createElement('div');
            container.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
            container.innerHTML = `
                <div class="bg-white rounded-xl shadow-2xl p-6 max-w-sm w-full border border-gold" dir="${currentLang === 'ar' ? 'rtl' : 'ltr'}">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">${currentLang === 'ar' ? titleAr : titleEn}</h3>
                    <p class="text-gray-600 mb-4">${message}</p>
                    <button onclick="this.parentNode.parentNode.remove()" class="w-full py-2 rounded-lg text-white bg-gold hover:bg-yellow-600 transition duration-300 font-semibold">
                        ${currentLang === 'ar' ? buttonAr : buttonEn}
                    </button>
                </div>
            `;
            document.body.appendChild(container);
        }
    </script>
</body>
</html>